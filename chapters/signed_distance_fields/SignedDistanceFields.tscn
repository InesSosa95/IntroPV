[gd_scene load_steps=5 format=2]

[ext_resource path="res://theme/theme_font/demo_theme.tres" type="Theme" id=1]
[ext_resource path="res://assets/white_square_64x64.png" type="Texture" id=2]

[sub_resource type="Shader" id=3]
code = "shader_type canvas_item;

uniform float width = 0.05;
uniform float progress: hint_range(0.1, 0.9) = 0.05;
uniform vec4 healtColour: hint_color;


float sdSegment( in vec2 p, in vec2 a, in vec2 b )
{
    vec2 pa = p-a, ba = b-a;
    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );
    return length( pa - ba*h );
}


vec3 vectorLineFor(float aScale){
	return vec3(1.0 - smoothstep(width, width + 0.01, aScale));
}

void fragment() {
	float backgroundScale = sdSegment(UV, vec2(0.1, 0.5), vec2(0.9, 0.5));
	vec3 background = vectorLineFor(backgroundScale);
	
	float foregroundScale = sdSegment(UV, vec2(0.1, 0.5), vec2(progress, 0.5));
	vec3 foreground = vectorLineFor(foregroundScale);
	
	
	vec3 progressBar = mix(background, healtColour.rgb ,foreground.r);
	
	COLOR = vec4(progressBar, 1.0);
}"

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 3 )
shader_param/width = 0.018
shader_param/progress = 0.734
shader_param/healtColour = Color( 0.764706, 0.458824, 0.819608, 1 )

[node name="SignedDistanceFields" type="Node2D"]

[node name="Circle" type="Node2D" parent="."]
position = Vector2( 96, 24 )

[node name="Label" type="Label" parent="Circle"]
margin_right = 40.0
margin_bottom = 14.0
theme = ExtResource( 1 )
text = "Círculo"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Segment" type="Node2D" parent="."]
position = Vector2( 416, 24 )

[node name="white_square_64x64" type="Sprite" parent="Segment"]
material = SubResource( 4 )
position = Vector2( 96, 136 )
scale = Vector2( 3, 3 )
texture = ExtResource( 2 )

[node name="Label" type="Label" parent="Segment"]
margin_right = 40.0
margin_bottom = 14.0
theme = ExtResource( 1 )
text = "Segmento"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Box" type="Node2D" parent="."]
position = Vector2( 736, 24 )

[node name="Label" type="Label" parent="Box"]
margin_right = 40.0
margin_bottom = 14.0
theme = ExtResource( 1 )
text = "Rectángulo"
__meta__ = {
"_edit_use_anchors_": false
}
